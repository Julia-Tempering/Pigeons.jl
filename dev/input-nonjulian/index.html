<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Non-julian MCMC · Pigeons.jl</title><meta name="title" content="Non-julian MCMC · Pigeons.jl"/><meta property="og:title" content="Non-julian MCMC · Pigeons.jl"/><meta property="twitter:title" content="Non-julian MCMC · Pigeons.jl"/><meta name="description" content="Documentation for Pigeons.jl."/><meta property="og:description" content="Documentation for Pigeons.jl."/><meta property="twitter:description" content="Documentation for Pigeons.jl."/><meta property="og:url" content="https://Julia-Tempering.github.io/Pigeons.jl/input-nonjulian/"/><meta property="twitter:url" content="https://Julia-Tempering.github.io/Pigeons.jl/input-nonjulian/"/><link rel="canonical" href="https://Julia-Tempering.github.io/Pigeons.jl/input-nonjulian/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Pigeons.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Basic usage (local)</a></li><li><a class="tocitem" href="../unidentifiable-example/">Why parallel tempering (PT)?</a></li><li><a class="tocitem" href="../parallel/">Parallelization</a></li><li><a class="tocitem" href="../mpi/">Distributed usage (MPI)</a></li><li><a class="tocitem" href="../variational/">Variational PT</a></li><li><span class="tocitem">Supported inputs</span><ul><li><a class="tocitem" href="../input-overview/">Inputs overview</a></li><li><a class="tocitem" href="../input-turing/">Turing.jl model</a></li><li><a class="tocitem" href="../input-julia/">Black-box function</a></li><li><a class="tocitem" href="../input-stan/">Stan model</a></li><li class="is-active"><a class="tocitem" href>Non-julian MCMC</a><ul class="internal"><li><a class="tocitem" href="#Usage-example"><span>Usage example</span></a></li></ul></li><li><a class="tocitem" href="../input-explorers/">Custom MCMC</a></li></ul></li><li><span class="tocitem">Outputs</span><ul><li><a class="tocitem" href="../output-overview/">Outputs overview</a></li><li><a class="tocitem" href="../output-inferencereport/">Automated reports</a></li><li><a class="tocitem" href="../output-reports/">Standard output</a></li><li><a class="tocitem" href="../output-traces/">Traces</a></li><li><a class="tocitem" href="../output-plotting/">Plots</a></li><li><a class="tocitem" href="../output-normalization/">log(Z)</a></li><li><a class="tocitem" href="../output-numerical/">Numerical</a></li><li><a class="tocitem" href="../output-online/">Online stats</a></li><li><a class="tocitem" href="../output-off-memory/">Off-memory</a></li><li><a class="tocitem" href="../output-pt/">PT diagnostics</a></li><li><a class="tocitem" href="../output-custom-types/">Custom types</a></li><li><a class="tocitem" href="../output-extended/">Extended output</a></li><li><a class="tocitem" href="../output-mpi-postprocessing/">MPI output</a></li></ul></li><li><a class="tocitem" href="../checkpoints/">Checkpoints</a></li><li><a class="tocitem" href="../correctness/">Correctness checks</a></li><li><a class="tocitem" href="../pt/">More on PT</a></li><li><a class="tocitem" href="../distributed/">More on distributed PT</a></li><li><a class="tocitem" href="../interfaces/">Interfaces</a></li><li><a class="tocitem" href="../reference/">Reference</a></li><li><a class="tocitem" href="../developers/">For developers</a></li><li><a class="tocitem" href="../openings/">Openings</a></li><li><a class="tocitem" href="../about-us/">About Us</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Supported inputs</a></li><li class="is-active"><a href>Non-julian MCMC</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Non-julian MCMC</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Julia-Tempering/Pigeons.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Julia-Tempering/Pigeons.jl/blob/main/docs/src/input-nonjulian.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="input-nonjulian"><a class="docs-heading-anchor" href="#input-nonjulian">Targeting a non-Julian model</a><a id="input-nonjulian-1"></a><a class="docs-heading-anchor-permalink" href="#input-nonjulian" title="Permalink"></a></h1><p>Suppose you have some code implementing vanilla MCMC, written in an arbitrary &quot;foreign&quot; language such as C++, Python, R, Java, etc. You would like to turn this vanilla MCMC code into a Parallel Tempering algorithm able to harness large numbers of cores, including distributing this algorithm over MPI. However, you do not wish to learn anything about MPI/multi-threading/Parallel Tempering.</p><p>Surprisingly, it is very simple to bridge such code with Pigeons. The only requirement on the &quot;foreign&quot; language is that it supports reading the standard in and writing to the standard out, hence virtually any languages can be interfaced in this fashion. Based on this minimalist &quot;standard stream bridge&quot; with worker processes running foreign code (one such process per replica; not necessarily running on the same machine), Pigeons will coordinate the execution of an adaptive non-reversible parallel tempering algorithm.</p><p>This behaviour is implemented in <a href="../reference/#Pigeons.StreamTarget"><code>StreamTarget</code></a>, see its documentation for details.  In a nutshell, there will be one child process for each PT chain. These processes will not necessarily be on  the same machine: indeed distributed sampling is the key use case of this bridge.  Pigeons will do some  lightweight coordination with these child processes to orchestrate non-reversible parallel tempering.  Interprocess communication only involves pigeons telling each child process  to perform exploration at a pigeons-provided annealing parameter. </p><p><a href="../reference/#Pigeons.StreamTarget"><code>StreamTarget</code></a> implements <a href="../interfaces/#log_potential"><code>log_potential</code></a> and <a href="../interfaces/#explorer"><code>explorer</code></a>  by invoking worker processes via standard stream communication. The standard stream is less efficient than alternatives such as  protobuff, but it has the advantage of being supported by nearly all  programming languages in existence.  Also in many practical cases, since the worker  process is invoked only three times per chain per iteration, it is unlikely to be the bottleneck (overhead is in the order of 0.1ms per interprocess call).  </p><h2 id="Usage-example"><a class="docs-heading-anchor" href="#Usage-example">Usage example</a><a id="Usage-example-1"></a><a class="docs-heading-anchor-permalink" href="#Usage-example" title="Permalink"></a></h2><p>To demonstrate this capability, we show  here how it enables running Blang models in  pigeons.  <a href="https://github.com/UBC-Stat-ML/blangSDK">Blang</a> is a Bayesian modelling language designed  for sampling combinatorial spaces such as  phylogenetic trees. </p><p>We first setup Blang as follows (assuming Java 11 is accessible in the <code>PATH</code> variable):</p><pre><code class="language-julia hljs">using Pigeons

redirect_stdout(devnull) do
    Pigeons.setup_blang(&quot;blangDemos&quot;)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr33"><span class="sgr1">┌ Warning: </span></span>Using a precompiled build for blangDemos: double check it is up to date
<span class="sgr33"><span class="sgr1">└ </span></span><span class="sgr90">@ Pigeons ~/work/Pigeons.jl/Pigeons.jl/src/targets/BlangTarget.jl:141</span>
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  0     0    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     0  0     0    0     0    0     0      0      0 --:--:--  0:00:02 --:--:--     0  0     0    0     0    0     0      0      0 --:--:--  0:00:03 --:--:--     0  0     0    0     0    0     0      0      0 --:--:--  0:00:04 --:--:--     0  0  152M    0 1343k    0     0   244k      0  0:10:39  0:00:05  0:10:34  269k  1  152M    1 2726k    0     0   421k      0  0:06:11  0:00:06  0:06:05  550k  2  152M    2 3757k    0     0   502k      0  0:05:11  0:00:07  0:05:04  756k  2  152M    2 4562k    0     0   537k      0  0:04:51  0:00:08  0:04:43  915k  3  152M    3 5382k    0     0   568k      0  0:04:35  0:00:09  0:04:26 1076k  4  152M    4 6374k    0     0   607k      0  0:04:17  0:00:10  0:04:07 1006k  4  152M    4 7296k    0     0   634k      0  0:04:06  0:00:11  0:03:55  907k  5  152M    5 8218k    0     0   658k      0  0:03:57  0:00:12  0:03:45  893k  5  152M    5 9312k    0     0   690k      0  0:03:46  0:00:13  0:03:33  951k  6  152M    6 10.1M    0     0   717k      0  0:03:38  0:00:14  0:03:24  999k  7  152M    7 11.3M    0     0   748k      0  0:03:29  0:00:15  0:03:14 1042k  8  152M    8 12.5M    0     0   776k      0  0:03:21  0:00:16  0:03:05 1105k  8  152M    8 13.5M    0     0   794k      0  0:03:17  0:00:17  0:03:00 1132k  9  152M    9 14.8M    0     0   820k      0  0:03:11  0:00:18  0:02:53 1170k 10  152M   10 16.1M    0     0   845k      0  0:03:05  0:00:19  0:02:46 1216k 11  152M   11 17.2M    0     0   861k      0  0:03:01  0:00:20  0:02:41 1213k 12  152M   12 18.3M    0     0   875k      0  0:02:58  0:00:21  0:02:37 1203k 12  152M   12 19.6M    0     0   894k      0  0:02:55  0:00:22  0:02:33 1240k 13  152M   13 20.9M    0     0   912k      0  0:02:51  0:00:23  0:02:28 1256k 14  152M   14 22.2M    0     0   931k      0  0:02:48  0:00:24  0:02:24 1267k 15  152M   15 23.7M    0     0   953k      0  0:02:44  0:00:25  0:02:19 1331k 16  152M   16 25.2M    0     0   977k      0  0:02:40  0:00:26  0:02:14 1412k 17  152M   17 26.5M    0     0   989k      0  0:02:38  0:00:27  0:02:11 1417k 18  152M   18 27.9M    0     0  1006k      0  0:02:35  0:00:28  0:02:07 1444k 19  152M   19 29.6M    0     0  1029k      0  0:02:32  0:00:29  0:02:03 1506k 20  152M   20 31.2M    0     0  1050k      0  0:02:29  0:00:30  0:01:59 1541k 21  152M   21 32.9M    0     0  1071k      0  0:02:26  0:00:31  0:01:55 1568k 22  152M   22 34.6M    0     0  1092k      0  0:02:23  0:00:32  0:01:51 1663k 23  152M   23 36.4M    0     0  1116k      0  0:02:20  0:00:33  0:01:47 1742k 24  152M   24 37.9M    0     0  1128k      0  0:02:18  0:00:34  0:01:44 1712k 25  152M   25 39.1M    0     0  1129k      0  0:02:18  0:00:35  0:01:43 1612k 26  152M   26 40.1M    0     0  1126k      0  0:02:19  0:00:36  0:01:43 1478k 26  152M   26 41.1M    0     0  1124k      0  0:02:19  0:00:37  0:01:42 1332k 27  152M   27 42.2M    0     0  1125k      0  0:02:19  0:00:38  0:01:41 1184k 28  152M   28 43.5M    0     0  1129k      0  0:02:18  0:00:39  0:01:39 1139k 29  152M   29 44.8M    0     0  1135k      0  0:02:17  0:00:40  0:01:37 1176k 30  152M   30 46.4M    0     0  1145k      0  0:02:16  0:00:41  0:01:35 1280k 31  152M   31 48.0M    0     0  1157k      0  0:02:15  0:00:42  0:01:33 1404k 32  152M   32 49.7M    0     0  1172k      0  0:02:13  0:00:43  0:01:30 1535k 33  152M   33 51.8M    0     0  1193k      0  0:02:11  0:00:44  0:01:27 1698k 35  152M   35 53.7M    0     0  1210k      0  0:02:09  0:00:45  0:01:24 1819k 36  152M   36 55.3M    0     0  1219k      0  0:02:08  0:00:46  0:01:22 1834k 37  152M   37 56.9M    0     0  1229k      0  0:02:07  0:00:47  0:01:20 1839k 38  152M   38 58.7M    0     0  1241k      0  0:02:06  0:00:48  0:01:18 1844k 39  152M   39 60.6M    0     0  1255k      0  0:02:04  0:00:49  0:01:15 1798k 40  152M   40 62.6M    0     0  1270k      0  0:02:03  0:00:50  0:01:13 1816k 42  152M   42 64.6M    0     0  1286k      0  0:02:01  0:00:51  0:01:10 1907k 43  152M   43 66.2M    0     0  1293k      0  0:02:01  0:00:52  0:01:09 1898k 44  152M   44 67.8M    0     0  1299k      0  0:02:00  0:00:53  0:01:07 1861k 45  152M   45 69.3M    0     0  1303k      0  0:02:00  0:00:54  0:01:06 1782k 46  152M   46 70.8M    0     0  1308k      0  0:01:59  0:00:55  0:01:04 1696k 47  152M   47 72.5M    0     0  1316k      0  0:01:59  0:00:56  0:01:03 1624k 48  152M   48 74.3M    0     0  1324k      0  0:01:58  0:00:57  0:01:01 1657k 49  152M   49 76.1M    0     0  1333k      0  0:01:57  0:00:58  0:00:59 1703k 51  152M   51 78.1M    0     0  1345k      0  0:01:56  0:00:59  0:00:57 1805k 52  152M   52 80.1M    0     0  1357k      0  0:01:55  0:01:00  0:00:55 1892k 53  152M   53 81.5M    0     0  1359k      0  0:01:55  0:01:01  0:00:54 1846k 54  152M   54 82.6M    0     0  1354k      0  0:01:55  0:01:02  0:00:53 1700k 54  152M   54 83.7M    0     0  1350k      0  0:01:55  0:01:03  0:00:52 1547k 55  152M   55 84.8M    0     0  1347k      0  0:01:56  0:01:04  0:00:52 1375k 56  152M   56 85.9M    0     0  1344k      0  0:01:56  0:01:05  0:00:51 1189k 56  152M   56 86.9M    0     0  1340k      0  0:01:56  0:01:06  0:00:50 1107k 57  152M   57 88.2M    0     0  1338k      0  0:01:57  0:01:07  0:00:50 1137k 58  152M   58 89.4M    0     0  1338k      0  0:01:57  0:01:08  0:00:49 1177k 59  152M   59 90.7M    0     0  1338k      0  0:01:57  0:01:09  0:00:48 1209k 60  152M   60 92.1M    0     0  1339k      0  0:01:56  0:01:10  0:00:46 1269k 61  152M   61 93.7M    0     0  1342k      0  0:01:56  0:01:11  0:00:45 1372k 62  152M   62 95.2M    0     0  1346k      0  0:01:56  0:01:12  0:00:44 1447k 63  152M   63 97.0M    0     0  1351k      0  0:01:55  0:01:13  0:00:42 1543k 64  152M   64 99.0M    0     0  1361k      0  0:01:55  0:01:14  0:00:41 1685k 66  152M   66  101M    0     0  1377k      0  0:01:53  0:01:15  0:00:38 1924k 68  152M   68  105M    0     0  1405k      0  0:01:51  0:01:16  0:00:35 2310k 71  152M   71  109M    0     0  1446k      0  0:01:48  0:01:17  0:00:31 2891k 75  152M   75  115M    0     0  1500k      0  0:01:44  0:01:18  0:00:26 3691k 79  152M   79  122M    0     0  1574k      0  0:01:39  0:01:19  0:00:20 4756k 83  152M   83  128M    0     0  1631k      0  0:01:35  0:01:20  0:00:15 5468k 87  152M   87  133M    0     0  1680k      0  0:01:33  0:01:21  0:00:12 5895k 90  152M   90  137M    0     0  1712k      0  0:01:31  0:01:22  0:00:09 5835k 91  152M   91  140M    0     0  1725k      0  0:01:30  0:01:23  0:00:07 5253k 93  152M   93  143M    0     0  1742k      0  0:01:29  0:01:24  0:00:05 4405k 95  152M   95  146M    0     0  1755k      0  0:01:29  0:01:25  0:00:04 3748k 97  152M   97  148M    0     0  1764k      0  0:01:28  0:01:26  0:00:02 3120k 99  152M   99  151M    0     0  1774k      0  0:01:28  0:01:27  0:00:01 2792k100  152M  100  152M    0     0  1780k      0  0:01:27  0:01:27 --:--:-- 2791k</code></pre><p>Next, we run a   <a href="https://github.com/UBC-Stat-ML/blangDemos/blob/master/src/main/java/demos/UnidentifiableProduct.bl">Blang implementation</a> of  our usual <a href="../unidentifiable-example/#unidentifiable-example">unidentifiable toy example</a>:</p><pre><code class="language-julia hljs">using Pigeons

blang_unidentifiable_example(n_trials, n_successes) =
    Pigeons.BlangTarget(
        `$(Pigeons.blang_executable(&quot;blangDemos&quot;, &quot;demos.UnidentifiableProduct&quot;)) --model.nTrials $n_trials --model.nFails $n_successes`
    )
pt = pigeons(target = blang_unidentifiable_example(100, 50))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr36"><span class="sgr1">┌ Info: </span></span>Neither traces, disk, nor online recorders included.
<span class="sgr36"><span class="sgr1">│ </span></span>   You may not have access to your samples (unless you are using a custom recorder, or maybe you just want log(Z)).
<span class="sgr36"><span class="sgr1">└ </span></span>   To add recorders, use e.g. pigeons(target = ..., record = [traces; record_default()])
Preprocess {
  2 samplers constructed with following prototypes:
    RealScalar sampled via: [RealSliceSampler]
} [ endingBlock=Preprocess blockTime=405.5ms blockNErrors=0 ]
Inference {
  ────────────────────────────────────────────────────────────────────────────
  scans        Λ        time(s)    allc(B)  log(Z₁/Z₀)   min(α)     mean(α)
────────── ────────── ────────── ────────── ────────── ────────── ──────────
        2      0.992       8.74   1.62e+07      -4.05      0.621       0.89
        4       1.42     0.0844   8.67e+06      -4.43      0.192      0.842
        8       1.44     0.0645   1.77e+07      -5.35      0.581       0.84
       16        1.7      0.133   3.51e+07      -4.72      0.577      0.811
       32       1.51       0.21   7.03e+07       -4.8      0.602      0.833
       64       1.52      0.363   1.45e+08      -4.95      0.727      0.831
      128       1.56      0.542   2.79e+08      -4.93      0.713      0.827
      256       1.52      0.969   5.54e+08      -5.06       0.78      0.831
      512       1.52       1.55   1.07e+09      -4.97      0.793      0.831
 1.02e+03       1.54       2.76    2.1e+09      -4.97      0.789      0.829
────────────────────────────────────────────────────────────────────────────</code></pre><p>As shown above, create a <a href="../reference/#Pigeons.StreamTarget"><code>StreamTarget</code></a> amounts to specifying which command will  be used to create a child process. </p><p>To terminate the child processes associated with a stream target, use:</p><pre><code class="language-julia hljs">Pigeons.kill_child_processes(pt)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../input-stan/">« Stan model</a><a class="docs-footer-nextpage" href="../input-explorers/">Custom MCMC »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Saturday 7 February 2026 02:39">Saturday 7 February 2026</span>. Using Julia version 1.11.8.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
